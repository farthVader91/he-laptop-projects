<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>AQI Widget Integration</title>
    <link rel="stylesheet" href="static/style.css">
    <script  type="text/javascript"  charset="utf-8">
      (function(w,d,t,f){  w[f]=w[f]||function(c,k,n){s=w[f],k=s['k']=(s['k']||(k?('&k='+k):''));s['c']=
      c=(c  instanceof  Array)?c:[c];s['n']=n=n||0;L=d.createElement(t),e=d.getElementsByTagName(t)[0];
      L.async=1;L.src='//feed.aqicn.org/feed/'+(c[n].city)+'/'+(c[n].lang||'')+'/feed.v1.js?n='+n+k;
      e.parentNode.insertBefore(L,e);  };  })(  window,document,'script','_aqiFeed'  );
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
      .aqi-container {
      display: inline-block;
      width: 115px;
      height: 115px;
      background-image: url(http://cdn2.winston.com/cached/40140/images/home-placeholder-circle.png),
      background-size: contain;
      }
      .aqi-container
      .location {
      position: absolute;
      top: 20px;
      left: 0px;
      width: 100%;
      }
      .reading {
      position: absolute;
      top: 25px;
      left: 0px;
      width: 100%;
      }
    </style>
  </head>
  <body>
    <h2>Realtime AQI Index:</h2>
    <div id="multiple-city-aqi" height="500" width="500"></div>
    <script  type="text/javascript"  charset="utf-8">
      var token = "dda451329488f72cf6d0bdde3e3f40f6e70f4b03";
      var apiUrl = "//api.waqi.info/";
      var cities = ["london", "hongkong", "tokyo", "sydney", "melbourne", "bangalore"];
      cities.forEach(function (city) {
      $.getJSON(apiUrl + "feed/" + city + "/?token=" + token, function (result) {
        console.log(result);
      $("#multiple-city-aqi").append("<div style='position: relative;'><img src='http://cdn2.winston.com/cached/40140/images/home-placeholder-circle.png' width='60' height='60'></img><span class='location'>"+result.data.city.name+"</span><span class='reading'>Test</span></div>")})});
      /*
      $("<img>").attr("src", "http://cdn2.winston.com/cached/40140/images/home-placeholder-circle.png").attr("width", "60").attr("height", "60")
        $("<circle />").attr("cx", "50").attr("cy", "50")
          .attr("r", "40").attr("stroke", "black").attr("stroke-width", "3")
          .attr("fill", "red"),
          $("<text>").attr("x", "50%").attr("text-anchor", "middle").attr("dy", ".3em")
            .text(result.data.city.name),
          $("<text>").attr("x", "50%").attr("text-anchor", "middle").attr("dy", ".3em")
          .text(result.data.aqi));
        });
      });
          */
    </script>
  </body>
</html>
